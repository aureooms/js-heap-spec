'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.del = undefined;
exports._del = _del;

var _tester = require('../tester');

var _jsRandom = require('@aureooms/js-random');

function _del(_test, length, heapname, Heap, diffname, diff, n) {

	var title = 'Heap delete (' + heapname + ', ' + diffname + ', ' + n + ')';

	_test(title, function (t) {

		var q, a, reference, references, i, x, b;

		q = Heap(diff);
		a = [];
		b = [];
		references = [];

		if (length) t.deepEqual(q.length, 0, "check length zero");

		i = n;
		while (i--) {
			x = Math.random();
			reference = q.push(x);
			references.push(reference);
			a.push(x);
			if (length) t.deepEqual(q.length, a.length);
		}

		(0, _jsRandom.shuffle)(references, 0, n);

		for (i = 0; i < n / 2; ++i) {

			b.push(references[i].value);
			q.delete(references[i]);
			if (length) t.deepEqual(q.length, a.length - b.length);
		}

		for (; i < n; ++i) {

			b.push(q.pop());
			if (length) t.deepEqual(q.length, a.length - b.length);
		}

		a.sort(diff);
		b.sort(diff);

		t.deepEqual(b, a, "check identical");

		if (length) t.deepEqual(q.length, 0, "check length zero");

		t.deepEqual(q.head(), undefined, "check head empty");
		t.deepEqual(q.headreference(), null, "check headreference empty");
		t.deepEqual(q.pop(), undefined, "check pop empty");
		t.deepEqual(q.popreference(), null, "check popreference empty");
	});
}

var del = exports.del = (0, _tester.tester)(_del);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9wYXJ0cy9kZWxldGUuanMiXSwibmFtZXMiOlsiX2RlbCIsIl90ZXN0IiwibGVuZ3RoIiwiaGVhcG5hbWUiLCJIZWFwIiwiZGlmZm5hbWUiLCJkaWZmIiwibiIsInRpdGxlIiwicSIsImEiLCJyZWZlcmVuY2UiLCJyZWZlcmVuY2VzIiwiaSIsIngiLCJiIiwidCIsImRlZXBFcXVhbCIsIk1hdGgiLCJyYW5kb20iLCJwdXNoIiwidmFsdWUiLCJkZWxldGUiLCJwb3AiLCJzb3J0IiwiaGVhZCIsInVuZGVmaW5lZCIsImhlYWRyZWZlcmVuY2UiLCJwb3ByZWZlcmVuY2UiLCJkZWwiXSwibWFwcGluZ3MiOiI7Ozs7OztRQUdnQkEsSSxHQUFBQSxJOztBQUhoQjs7QUFDQTs7QUFFTyxTQUFTQSxJQUFULENBQWdCQyxLQUFoQixFQUF1QkMsTUFBdkIsRUFBK0JDLFFBQS9CLEVBQXlDQyxJQUF6QyxFQUErQ0MsUUFBL0MsRUFBeURDLElBQXpELEVBQStEQyxDQUEvRCxFQUFtRTs7QUFFekUsS0FBTUMsMEJBQXdCTCxRQUF4QixVQUFxQ0UsUUFBckMsVUFBa0RFLENBQWxELE1BQU47O0FBRUFOLE9BQU9PLEtBQVAsRUFBYyxhQUFLOztBQUVsQixNQUFJQyxDQUFKLEVBQU9DLENBQVAsRUFBVUMsU0FBVixFQUFxQkMsVUFBckIsRUFBaUNDLENBQWpDLEVBQW9DQyxDQUFwQyxFQUF1Q0MsQ0FBdkM7O0FBRUFOLE1BQUlMLEtBQU1FLElBQU4sQ0FBSjtBQUNBSSxNQUFJLEVBQUo7QUFDQUssTUFBSSxFQUFKO0FBQ0FILGVBQWEsRUFBYjs7QUFFQSxNQUFJVixNQUFKLEVBQVljLEVBQUVDLFNBQUYsQ0FBYVIsRUFBRVAsTUFBZixFQUF1QixDQUF2QixFQUEwQixtQkFBMUI7O0FBRVpXLE1BQUlOLENBQUo7QUFDQSxTQUFRTSxHQUFSLEVBQWM7QUFDYkMsT0FBSUksS0FBS0MsTUFBTCxFQUFKO0FBQ0FSLGVBQVlGLEVBQUVXLElBQUYsQ0FBUU4sQ0FBUixDQUFaO0FBQ0FGLGNBQVdRLElBQVgsQ0FBaUJULFNBQWpCO0FBQ0FELEtBQUVVLElBQUYsQ0FBUU4sQ0FBUjtBQUNBLE9BQUlaLE1BQUosRUFBWWMsRUFBRUMsU0FBRixDQUFhUixFQUFFUCxNQUFmLEVBQXVCUSxFQUFFUixNQUF6QjtBQUNaOztBQUVELHlCQUFTVSxVQUFULEVBQXFCLENBQXJCLEVBQXdCTCxDQUF4Qjs7QUFFQSxPQUFNTSxJQUFJLENBQVYsRUFBY0EsSUFBSU4sSUFBSSxDQUF0QixFQUEwQixFQUFFTSxDQUE1QixFQUFnQzs7QUFFL0JFLEtBQUVLLElBQUYsQ0FBUVIsV0FBV0MsQ0FBWCxFQUFjUSxLQUF0QjtBQUNBWixLQUFFYSxNQUFGLENBQVVWLFdBQVdDLENBQVgsQ0FBVjtBQUNBLE9BQUlYLE1BQUosRUFBWWMsRUFBRUMsU0FBRixDQUFhUixFQUFFUCxNQUFmLEVBQXVCUSxFQUFFUixNQUFGLEdBQVdhLEVBQUViLE1BQXBDO0FBRVo7O0FBRUQsU0FBUVcsSUFBSU4sQ0FBWixFQUFnQixFQUFFTSxDQUFsQixFQUFzQjs7QUFFckJFLEtBQUVLLElBQUYsQ0FBUVgsRUFBRWMsR0FBRixFQUFSO0FBQ0EsT0FBSXJCLE1BQUosRUFBWWMsRUFBRUMsU0FBRixDQUFhUixFQUFFUCxNQUFmLEVBQXVCUSxFQUFFUixNQUFGLEdBQVdhLEVBQUViLE1BQXBDO0FBRVo7O0FBRURRLElBQUVjLElBQUYsQ0FBUWxCLElBQVI7QUFDQVMsSUFBRVMsSUFBRixDQUFRbEIsSUFBUjs7QUFFQVUsSUFBRUMsU0FBRixDQUFhRixDQUFiLEVBQWdCTCxDQUFoQixFQUFtQixpQkFBbkI7O0FBRUEsTUFBSVIsTUFBSixFQUFZYyxFQUFFQyxTQUFGLENBQWFSLEVBQUVQLE1BQWYsRUFBdUIsQ0FBdkIsRUFBMEIsbUJBQTFCOztBQUVaYyxJQUFFQyxTQUFGLENBQWFSLEVBQUVnQixJQUFGLEVBQWIsRUFBdUJDLFNBQXZCLEVBQWtDLGtCQUFsQztBQUNBVixJQUFFQyxTQUFGLENBQWFSLEVBQUVrQixhQUFGLEVBQWIsRUFBZ0MsSUFBaEMsRUFBc0MsMkJBQXRDO0FBQ0FYLElBQUVDLFNBQUYsQ0FBYVIsRUFBRWMsR0FBRixFQUFiLEVBQXNCRyxTQUF0QixFQUFpQyxpQkFBakM7QUFDQVYsSUFBRUMsU0FBRixDQUFhUixFQUFFbUIsWUFBRixFQUFiLEVBQStCLElBQS9CLEVBQXFDLDBCQUFyQztBQUVBLEVBakREO0FBbURBOztBQUVNLElBQU1DLG9CQUFNLG9CQUFRN0IsSUFBUixDQUFaIiwiZmlsZSI6ImRlbGV0ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHRlc3RlciB9IGZyb20gJy4uL3Rlc3RlcicgO1xuaW1wb3J0IHsgc2h1ZmZsZSB9IGZyb20gJ0BhdXJlb29tcy9qcy1yYW5kb20nIDtcblxuZXhwb3J0IGZ1bmN0aW9uIF9kZWwgKCBfdGVzdCwgbGVuZ3RoLCBoZWFwbmFtZSwgSGVhcCwgZGlmZm5hbWUsIGRpZmYsIG4gKSB7XG5cblx0Y29uc3QgdGl0bGUgPSBgSGVhcCBkZWxldGUgKCR7aGVhcG5hbWV9LCAke2RpZmZuYW1lfSwgJHtufSlgO1xuXG5cdF90ZXN0KCB0aXRsZSwgdCA9PiB7XG5cblx0XHR2YXIgcSwgYSwgcmVmZXJlbmNlLCByZWZlcmVuY2VzLCBpLCB4LCBiO1xuXG5cdFx0cSA9IEhlYXAoIGRpZmYgKTtcblx0XHRhID0gW107XG5cdFx0YiA9IFtdO1xuXHRcdHJlZmVyZW5jZXMgPSBbXTtcblxuXHRcdGlmIChsZW5ndGgpIHQuZGVlcEVxdWFsKCBxLmxlbmd0aCwgMCwgXCJjaGVjayBsZW5ndGggemVyb1wiICk7XG5cblx0XHRpID0gbjtcblx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdHggPSBNYXRoLnJhbmRvbSgpO1xuXHRcdFx0cmVmZXJlbmNlID0gcS5wdXNoKCB4ICk7XG5cdFx0XHRyZWZlcmVuY2VzLnB1c2goIHJlZmVyZW5jZSApO1xuXHRcdFx0YS5wdXNoKCB4ICk7XG5cdFx0XHRpZiAobGVuZ3RoKSB0LmRlZXBFcXVhbCggcS5sZW5ndGgsIGEubGVuZ3RoICk7XG5cdFx0fVxuXG5cdFx0c2h1ZmZsZSggcmVmZXJlbmNlcywgMCwgbiApO1xuXG5cdFx0Zm9yICggaSA9IDAgOyBpIDwgbiAvIDIgOyArK2kgKSB7XG5cblx0XHRcdGIucHVzaCggcmVmZXJlbmNlc1tpXS52YWx1ZSApO1xuXHRcdFx0cS5kZWxldGUoIHJlZmVyZW5jZXNbaV0gKTtcblx0XHRcdGlmIChsZW5ndGgpIHQuZGVlcEVxdWFsKCBxLmxlbmd0aCwgYS5sZW5ndGggLSBiLmxlbmd0aCApO1xuXG5cdFx0fVxuXG5cdFx0Zm9yICggOyBpIDwgbiA7ICsraSApIHtcblxuXHRcdFx0Yi5wdXNoKCBxLnBvcCgpICk7XG5cdFx0XHRpZiAobGVuZ3RoKSB0LmRlZXBFcXVhbCggcS5sZW5ndGgsIGEubGVuZ3RoIC0gYi5sZW5ndGggKTtcblxuXHRcdH1cblxuXHRcdGEuc29ydCggZGlmZiApO1xuXHRcdGIuc29ydCggZGlmZiApO1xuXG5cdFx0dC5kZWVwRXF1YWwoIGIsIGEsIFwiY2hlY2sgaWRlbnRpY2FsXCIgKTtcblxuXHRcdGlmIChsZW5ndGgpIHQuZGVlcEVxdWFsKCBxLmxlbmd0aCwgMCwgXCJjaGVjayBsZW5ndGggemVyb1wiICk7XG5cblx0XHR0LmRlZXBFcXVhbCggcS5oZWFkKCksIHVuZGVmaW5lZCwgXCJjaGVjayBoZWFkIGVtcHR5XCIgKTtcblx0XHR0LmRlZXBFcXVhbCggcS5oZWFkcmVmZXJlbmNlKCksIG51bGwsIFwiY2hlY2sgaGVhZHJlZmVyZW5jZSBlbXB0eVwiICk7XG5cdFx0dC5kZWVwRXF1YWwoIHEucG9wKCksIHVuZGVmaW5lZCwgXCJjaGVjayBwb3AgZW1wdHlcIiApO1xuXHRcdHQuZGVlcEVxdWFsKCBxLnBvcHJlZmVyZW5jZSgpLCBudWxsLCBcImNoZWNrIHBvcHJlZmVyZW5jZSBlbXB0eVwiICk7XG5cblx0fSk7XG5cbn1cblxuZXhwb3J0IGNvbnN0IGRlbCA9IHRlc3RlciggX2RlbCApIDtcbiJdfQ==