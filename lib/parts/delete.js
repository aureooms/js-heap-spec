'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.del = undefined;
exports._del = _del;

var _tester = require('../tester');

var _aureoomsJsRandom = require('aureooms-js-random');

function _del(_test, heapname, Heap, diffname, diff, n) {

	var title = 'Heap delete (' + heapname + ', ' + diffname + ', ' + n + ')';

	_test(title, function (t) {

		var q, a, reference, references, i, x, b;

		q = Heap(diff);
		a = [];
		b = [];
		references = [];

		if (length) t.deepEqual(q.length, 0, "check length zero");

		i = n;
		while (i--) {
			x = Math.random();
			reference = q.push(x);
			references.push(reference);
			a.push(x);
			if (length) t.deepEqual(q.length, a.length);
		}

		(0, _aureoomsJsRandom.shuffle)(references, 0, n);

		for (i = 0; i < n / 2; ++i) {

			b.push(references[i].value);
			q.delete(references[i]);
			if (length) t.deepEqual(q.length, a.length - b.length);
		}

		for (; i < n; ++i) {

			b.push(q.pop());
			if (length) t.deepEqual(q.length, a.length - b.length);
		}

		a.sort(diff);
		b.sort(diff);

		t.deepEqual(b, a, "check identical");

		if (length) t.deepEqual(q.length, 0, "check length zero");

		t.deepEqual(q.head(), undefined, "check head empty");
		t.deepEqual(q.headreference(), null, "check headreference empty");
		t.deepEqual(q.pop(), undefined, "check pop empty");
		t.deepEqual(q.popreference(), null, "check popreference empty");
	});
}

var del = exports.del = (0, _tester.tester)(_del);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9wYXJ0cy9kZWxldGUuanMiXSwibmFtZXMiOlsiX2RlbCIsIl90ZXN0IiwiaGVhcG5hbWUiLCJIZWFwIiwiZGlmZm5hbWUiLCJkaWZmIiwibiIsInRpdGxlIiwicSIsImEiLCJyZWZlcmVuY2UiLCJyZWZlcmVuY2VzIiwiaSIsIngiLCJiIiwibGVuZ3RoIiwidCIsImRlZXBFcXVhbCIsIk1hdGgiLCJyYW5kb20iLCJwdXNoIiwidmFsdWUiLCJkZWxldGUiLCJwb3AiLCJzb3J0IiwiaGVhZCIsInVuZGVmaW5lZCIsImhlYWRyZWZlcmVuY2UiLCJwb3ByZWZlcmVuY2UiLCJkZWwiXSwibWFwcGluZ3MiOiI7Ozs7OztRQUdnQkEsSSxHQUFBQSxJOztBQUhoQjs7QUFDQTs7QUFFTyxTQUFTQSxJQUFULENBQWdCQyxLQUFoQixFQUF1QkMsUUFBdkIsRUFBaUNDLElBQWpDLEVBQXVDQyxRQUF2QyxFQUFpREMsSUFBakQsRUFBdURDLENBQXZELEVBQTJEOztBQUVqRSxLQUFNQywwQkFBd0JMLFFBQXhCLFVBQXFDRSxRQUFyQyxVQUFrREUsQ0FBbEQsTUFBTjs7QUFFQUwsT0FBT00sS0FBUCxFQUFjLGFBQUs7O0FBRWxCLE1BQUlDLENBQUosRUFBT0MsQ0FBUCxFQUFVQyxTQUFWLEVBQXFCQyxVQUFyQixFQUFpQ0MsQ0FBakMsRUFBb0NDLENBQXBDLEVBQXVDQyxDQUF2Qzs7QUFFQU4sTUFBSUwsS0FBTUUsSUFBTixDQUFKO0FBQ0FJLE1BQUksRUFBSjtBQUNBSyxNQUFJLEVBQUo7QUFDQUgsZUFBYSxFQUFiOztBQUVBLE1BQUlJLE1BQUosRUFBWUMsRUFBRUMsU0FBRixDQUFhVCxFQUFFTyxNQUFmLEVBQXVCLENBQXZCLEVBQTBCLG1CQUExQjs7QUFFWkgsTUFBSU4sQ0FBSjtBQUNBLFNBQVFNLEdBQVIsRUFBYztBQUNiQyxPQUFJSyxLQUFLQyxNQUFMLEVBQUo7QUFDQVQsZUFBWUYsRUFBRVksSUFBRixDQUFRUCxDQUFSLENBQVo7QUFDQUYsY0FBV1MsSUFBWCxDQUFpQlYsU0FBakI7QUFDQUQsS0FBRVcsSUFBRixDQUFRUCxDQUFSO0FBQ0EsT0FBSUUsTUFBSixFQUFZQyxFQUFFQyxTQUFGLENBQWFULEVBQUVPLE1BQWYsRUFBdUJOLEVBQUVNLE1BQXpCO0FBQ1o7O0FBRUQsaUNBQVNKLFVBQVQsRUFBcUIsQ0FBckIsRUFBd0JMLENBQXhCOztBQUVBLE9BQU1NLElBQUksQ0FBVixFQUFjQSxJQUFJTixJQUFJLENBQXRCLEVBQTBCLEVBQUVNLENBQTVCLEVBQWdDOztBQUUvQkUsS0FBRU0sSUFBRixDQUFRVCxXQUFXQyxDQUFYLEVBQWNTLEtBQXRCO0FBQ0FiLEtBQUVjLE1BQUYsQ0FBVVgsV0FBV0MsQ0FBWCxDQUFWO0FBQ0EsT0FBSUcsTUFBSixFQUFZQyxFQUFFQyxTQUFGLENBQWFULEVBQUVPLE1BQWYsRUFBdUJOLEVBQUVNLE1BQUYsR0FBV0QsRUFBRUMsTUFBcEM7QUFFWjs7QUFFRCxTQUFRSCxJQUFJTixDQUFaLEVBQWdCLEVBQUVNLENBQWxCLEVBQXNCOztBQUVyQkUsS0FBRU0sSUFBRixDQUFRWixFQUFFZSxHQUFGLEVBQVI7QUFDQSxPQUFJUixNQUFKLEVBQVlDLEVBQUVDLFNBQUYsQ0FBYVQsRUFBRU8sTUFBZixFQUF1Qk4sRUFBRU0sTUFBRixHQUFXRCxFQUFFQyxNQUFwQztBQUVaOztBQUVETixJQUFFZSxJQUFGLENBQVFuQixJQUFSO0FBQ0FTLElBQUVVLElBQUYsQ0FBUW5CLElBQVI7O0FBRUFXLElBQUVDLFNBQUYsQ0FBYUgsQ0FBYixFQUFnQkwsQ0FBaEIsRUFBbUIsaUJBQW5COztBQUVBLE1BQUlNLE1BQUosRUFBWUMsRUFBRUMsU0FBRixDQUFhVCxFQUFFTyxNQUFmLEVBQXVCLENBQXZCLEVBQTBCLG1CQUExQjs7QUFFWkMsSUFBRUMsU0FBRixDQUFhVCxFQUFFaUIsSUFBRixFQUFiLEVBQXVCQyxTQUF2QixFQUFrQyxrQkFBbEM7QUFDQVYsSUFBRUMsU0FBRixDQUFhVCxFQUFFbUIsYUFBRixFQUFiLEVBQWdDLElBQWhDLEVBQXNDLDJCQUF0QztBQUNBWCxJQUFFQyxTQUFGLENBQWFULEVBQUVlLEdBQUYsRUFBYixFQUFzQkcsU0FBdEIsRUFBaUMsaUJBQWpDO0FBQ0FWLElBQUVDLFNBQUYsQ0FBYVQsRUFBRW9CLFlBQUYsRUFBYixFQUErQixJQUEvQixFQUFxQywwQkFBckM7QUFFQSxFQWpERDtBQW1EQTs7QUFFTSxJQUFNQyxvQkFBTSxvQkFBUTdCLElBQVIsQ0FBWiIsImZpbGUiOiJkZWxldGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0ZXN0ZXIgfSBmcm9tICcuLi90ZXN0ZXInIDtcbmltcG9ydCB7IHNodWZmbGUgfSBmcm9tICdhdXJlb29tcy1qcy1yYW5kb20nIDtcblxuZXhwb3J0IGZ1bmN0aW9uIF9kZWwgKCBfdGVzdCwgaGVhcG5hbWUsIEhlYXAsIGRpZmZuYW1lLCBkaWZmLCBuICkge1xuXG5cdGNvbnN0IHRpdGxlID0gYEhlYXAgZGVsZXRlICgke2hlYXBuYW1lfSwgJHtkaWZmbmFtZX0sICR7bn0pYDtcblxuXHRfdGVzdCggdGl0bGUsIHQgPT4ge1xuXG5cdFx0dmFyIHEsIGEsIHJlZmVyZW5jZSwgcmVmZXJlbmNlcywgaSwgeCwgYjtcblxuXHRcdHEgPSBIZWFwKCBkaWZmICk7XG5cdFx0YSA9IFtdO1xuXHRcdGIgPSBbXTtcblx0XHRyZWZlcmVuY2VzID0gW107XG5cblx0XHRpZiAobGVuZ3RoKSB0LmRlZXBFcXVhbCggcS5sZW5ndGgsIDAsIFwiY2hlY2sgbGVuZ3RoIHplcm9cIiApO1xuXG5cdFx0aSA9IG47XG5cdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHR4ID0gTWF0aC5yYW5kb20oKTtcblx0XHRcdHJlZmVyZW5jZSA9IHEucHVzaCggeCApO1xuXHRcdFx0cmVmZXJlbmNlcy5wdXNoKCByZWZlcmVuY2UgKTtcblx0XHRcdGEucHVzaCggeCApO1xuXHRcdFx0aWYgKGxlbmd0aCkgdC5kZWVwRXF1YWwoIHEubGVuZ3RoLCBhLmxlbmd0aCApO1xuXHRcdH1cblxuXHRcdHNodWZmbGUoIHJlZmVyZW5jZXMsIDAsIG4gKTtcblxuXHRcdGZvciAoIGkgPSAwIDsgaSA8IG4gLyAyIDsgKytpICkge1xuXG5cdFx0XHRiLnB1c2goIHJlZmVyZW5jZXNbaV0udmFsdWUgKTtcblx0XHRcdHEuZGVsZXRlKCByZWZlcmVuY2VzW2ldICk7XG5cdFx0XHRpZiAobGVuZ3RoKSB0LmRlZXBFcXVhbCggcS5sZW5ndGgsIGEubGVuZ3RoIC0gYi5sZW5ndGggKTtcblxuXHRcdH1cblxuXHRcdGZvciAoIDsgaSA8IG4gOyArK2kgKSB7XG5cblx0XHRcdGIucHVzaCggcS5wb3AoKSApO1xuXHRcdFx0aWYgKGxlbmd0aCkgdC5kZWVwRXF1YWwoIHEubGVuZ3RoLCBhLmxlbmd0aCAtIGIubGVuZ3RoICk7XG5cblx0XHR9XG5cblx0XHRhLnNvcnQoIGRpZmYgKTtcblx0XHRiLnNvcnQoIGRpZmYgKTtcblxuXHRcdHQuZGVlcEVxdWFsKCBiLCBhLCBcImNoZWNrIGlkZW50aWNhbFwiICk7XG5cblx0XHRpZiAobGVuZ3RoKSB0LmRlZXBFcXVhbCggcS5sZW5ndGgsIDAsIFwiY2hlY2sgbGVuZ3RoIHplcm9cIiApO1xuXG5cdFx0dC5kZWVwRXF1YWwoIHEuaGVhZCgpLCB1bmRlZmluZWQsIFwiY2hlY2sgaGVhZCBlbXB0eVwiICk7XG5cdFx0dC5kZWVwRXF1YWwoIHEuaGVhZHJlZmVyZW5jZSgpLCBudWxsLCBcImNoZWNrIGhlYWRyZWZlcmVuY2UgZW1wdHlcIiApO1xuXHRcdHQuZGVlcEVxdWFsKCBxLnBvcCgpLCB1bmRlZmluZWQsIFwiY2hlY2sgcG9wIGVtcHR5XCIgKTtcblx0XHR0LmRlZXBFcXVhbCggcS5wb3ByZWZlcmVuY2UoKSwgbnVsbCwgXCJjaGVjayBwb3ByZWZlcmVuY2UgZW1wdHlcIiApO1xuXG5cdH0pO1xuXG59XG5cbmV4cG9ydCBjb25zdCBkZWwgPSB0ZXN0ZXIoIF9kZWwgKSA7XG4iXX0=