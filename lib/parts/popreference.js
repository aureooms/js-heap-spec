"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.popreference = undefined;
exports._popreference = _popreference;

var _tester = require("../tester");

function _popreference(_test, length, heapname, Heap, diffname, diff, n) {

	var title = "Heap popreference (" + heapname + ", " + diffname + ", " + n + ")";

	_test(title, function (t) {

		var q, a, i, x, b;

		q = Heap(diff);
		a = [];

		if (length) t.deepEqual(q.length, 0, "check length zero");

		i = n;
		while (i--) {
			x = Math.random();
			q.push(x);
			a.push(x);
			if (length) t.deepEqual(q.length, a.length);
		}

		i = n;
		b = [];

		while (i--) {
			b.push(q.popreference().value);
			if (length) t.deepEqual(q.length, i);
		}

		a.sort(diff);

		t.deepEqual(b, a, "check sorted");

		t.deepEqual(q.popreference(), null, "2nd empty pop");

		if (length) t.deepEqual(q.length, 0, "check length zero");
	});
}

var popreference = exports.popreference = (0, _tester.tester)(_popreference);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9wYXJ0cy9wb3ByZWZlcmVuY2UuanMiXSwibmFtZXMiOlsiX3BvcHJlZmVyZW5jZSIsIl90ZXN0IiwibGVuZ3RoIiwiaGVhcG5hbWUiLCJIZWFwIiwiZGlmZm5hbWUiLCJkaWZmIiwibiIsInRpdGxlIiwicSIsImEiLCJpIiwieCIsImIiLCJ0IiwiZGVlcEVxdWFsIiwiTWF0aCIsInJhbmRvbSIsInB1c2giLCJwb3ByZWZlcmVuY2UiLCJ2YWx1ZSIsInNvcnQiXSwibWFwcGluZ3MiOiI7Ozs7OztRQUVnQkEsYSxHQUFBQSxhOztBQUZoQjs7QUFFTyxTQUFTQSxhQUFULENBQXlCQyxLQUF6QixFQUFnQ0MsTUFBaEMsRUFBd0NDLFFBQXhDLEVBQWtEQyxJQUFsRCxFQUF3REMsUUFBeEQsRUFBa0VDLElBQWxFLEVBQXdFQyxDQUF4RSxFQUE0RTs7QUFFbEYsS0FBTUMsZ0NBQThCTCxRQUE5QixVQUEyQ0UsUUFBM0MsVUFBd0RFLENBQXhELE1BQU47O0FBRUFOLE9BQU9PLEtBQVAsRUFBYyxhQUFLOztBQUVsQixNQUFJQyxDQUFKLEVBQU9DLENBQVAsRUFBVUMsQ0FBVixFQUFhQyxDQUFiLEVBQWdCQyxDQUFoQjs7QUFFQUosTUFBSUwsS0FBTUUsSUFBTixDQUFKO0FBQ0FJLE1BQUksRUFBSjs7QUFFQSxNQUFJUixNQUFKLEVBQVlZLEVBQUVDLFNBQUYsQ0FBYU4sRUFBRVAsTUFBZixFQUF1QixDQUF2QixFQUEwQixtQkFBMUI7O0FBRVpTLE1BQUlKLENBQUo7QUFDQSxTQUFRSSxHQUFSLEVBQWM7QUFDYkMsT0FBSUksS0FBS0MsTUFBTCxFQUFKO0FBQ0FSLEtBQUVTLElBQUYsQ0FBT04sQ0FBUDtBQUNBRixLQUFFUSxJQUFGLENBQU9OLENBQVA7QUFDQSxPQUFJVixNQUFKLEVBQVlZLEVBQUVDLFNBQUYsQ0FBYU4sRUFBRVAsTUFBZixFQUF1QlEsRUFBRVIsTUFBekI7QUFDWjs7QUFFRFMsTUFBSUosQ0FBSjtBQUNBTSxNQUFJLEVBQUo7O0FBRUEsU0FBUUYsR0FBUixFQUFjO0FBQ2JFLEtBQUVLLElBQUYsQ0FBUVQsRUFBRVUsWUFBRixHQUFpQkMsS0FBekI7QUFDQSxPQUFJbEIsTUFBSixFQUFZWSxFQUFFQyxTQUFGLENBQWFOLEVBQUVQLE1BQWYsRUFBdUJTLENBQXZCO0FBQ1o7O0FBRURELElBQUVXLElBQUYsQ0FBT2YsSUFBUDs7QUFFQVEsSUFBRUMsU0FBRixDQUFhRixDQUFiLEVBQWdCSCxDQUFoQixFQUFtQixjQUFuQjs7QUFFQUksSUFBRUMsU0FBRixDQUFhTixFQUFFVSxZQUFGLEVBQWIsRUFBK0IsSUFBL0IsRUFBcUMsZUFBckM7O0FBRUEsTUFBSWpCLE1BQUosRUFBWVksRUFBRUMsU0FBRixDQUFhTixFQUFFUCxNQUFmLEVBQXVCLENBQXZCLEVBQTBCLG1CQUExQjtBQUVaLEVBakNEO0FBbUNBOztBQUVNLElBQU1pQixzQ0FBZSxvQkFBUW5CLGFBQVIsQ0FBckIiLCJmaWxlIjoicG9wcmVmZXJlbmNlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdGVzdGVyIH0gZnJvbSAnLi4vdGVzdGVyJyA7XG5cbmV4cG9ydCBmdW5jdGlvbiBfcG9wcmVmZXJlbmNlICggX3Rlc3QsIGxlbmd0aCwgaGVhcG5hbWUsIEhlYXAsIGRpZmZuYW1lLCBkaWZmLCBuICkge1xuXG5cdGNvbnN0IHRpdGxlID0gYEhlYXAgcG9wcmVmZXJlbmNlICgke2hlYXBuYW1lfSwgJHtkaWZmbmFtZX0sICR7bn0pYDtcblxuXHRfdGVzdCggdGl0bGUsIHQgPT4ge1xuXG5cdFx0dmFyIHEsIGEsIGksIHgsIGI7XG5cblx0XHRxID0gSGVhcCggZGlmZiApO1xuXHRcdGEgPSBbXTtcblxuXHRcdGlmIChsZW5ndGgpIHQuZGVlcEVxdWFsKCBxLmxlbmd0aCwgMCwgXCJjaGVjayBsZW5ndGggemVyb1wiKTtcblxuXHRcdGkgPSBuO1xuXHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0eCA9IE1hdGgucmFuZG9tKCk7XG5cdFx0XHRxLnB1c2goeCk7XG5cdFx0XHRhLnB1c2goeCk7XG5cdFx0XHRpZiAobGVuZ3RoKSB0LmRlZXBFcXVhbCggcS5sZW5ndGgsIGEubGVuZ3RoICk7XG5cdFx0fVxuXG5cdFx0aSA9IG47XG5cdFx0YiA9IFtdO1xuXG5cdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRiLnB1c2goIHEucG9wcmVmZXJlbmNlKCkudmFsdWUgKTtcblx0XHRcdGlmIChsZW5ndGgpIHQuZGVlcEVxdWFsKCBxLmxlbmd0aCwgaSApO1xuXHRcdH1cblxuXHRcdGEuc29ydChkaWZmKTtcblxuXHRcdHQuZGVlcEVxdWFsKCBiLCBhLCBcImNoZWNrIHNvcnRlZFwiICk7XG5cblx0XHR0LmRlZXBFcXVhbCggcS5wb3ByZWZlcmVuY2UoKSwgbnVsbCwgXCIybmQgZW1wdHkgcG9wXCIgKTtcblxuXHRcdGlmIChsZW5ndGgpIHQuZGVlcEVxdWFsKCBxLmxlbmd0aCwgMCwgXCJjaGVjayBsZW5ndGggemVyb1wiICk7XG5cblx0fSk7XG5cbn1cblxuZXhwb3J0IGNvbnN0IHBvcHJlZmVyZW5jZSA9IHRlc3RlciggX3BvcHJlZmVyZW5jZSApIDtcbiJdfQ==